# -----------------------------
# Target
# -----------------------------
# Exact URL-prefix target (no subdomains)
TARGET_DOMAIN=https://allegro.pl

# Schedule
SCHEDULE_TZ=Europe/Warsaw

# Output
OUTPUT_DIR="SEO Weekly Reports"
TOP_N=25
REPORT_COUNTRIES="PL,CZ,SK,HU"
REPORT_COUNTRY_CODE=PL

# Google Drive / Google Docs output
GOOGLE_DRIVE_ENABLED=true
GOOGLE_DRIVE_CLIENT_SECRET_PATH=client_secret.json
GOOGLE_DRIVE_TOKEN_PATH=.google_drive_token.json
GOOGLE_DRIVE_FOLDER_NAME="SEO Weekly Reports"
GOOGLE_DRIVE_FOLDER_ID=
SEO_PRESENTATIONS_ENABLED=false
SEO_PRESENTATIONS_FOLDER_REFERENCE=
SEO_PRESENTATIONS_MAX_FILES_PER_YEAR=20
SEO_PRESENTATIONS_MAX_TEXT_FILES_PER_YEAR=8

# Historical continuity and status log context
HISTORICAL_REPORTS_ENABLED=true
HISTORICAL_REPORTS_COUNT=3
HISTORICAL_REPORTS_YOY_TOLERANCE_DAYS=28
STATUS_LOG_ENABLED=true
# Optional direct URL/ID to status spreadsheet (Google Sheets)
STATUS_FILE_REFERENCE=
STATUS_MAX_ROWS=12

# Product trend sheets (non-brand)
PRODUCT_TRENDS_ENABLED=true
# Optional direct URL/ID to sheet with YoY trend comparison (this year vs previous year)
PRODUCT_TRENDS_COMPARISON_SHEET_REFERENCE=
# Sheet with upcoming trends (next N days)
PRODUCT_TRENDS_UPCOMING_SHEET_REFERENCE=
# Sheet with current trends
PRODUCT_TRENDS_CURRENT_SHEET_REFERENCE=
PRODUCT_TRENDS_TOP_ROWS=12
PRODUCT_TRENDS_HORIZON_DAYS=31

# Trade Plan (campaign/media context from Google Sheets)
TRADE_PLAN_ENABLED=true
TRADE_PLAN_SHEET_REFERENCE=
TRADE_PLAN_TAB_MAP="PL:TP_2026_PL,CZ:TP_2026_CZ,SK:TP_2026_SK,HU:TP_2026_HU"
TRADE_PLAN_TOP_ROWS=12

# -----------------------------
# GAIA (primary LLM config)
# -----------------------------
USE_LLM_ANALYSIS=true
GAIA_ENDPOINT=
GAIA_API_VERSION=2024-10-21
GAIA_MODEL=
GAIA_API_KEY=
# Optional fallback if GAIA_API_KEY is not set
OPENAI_API_KEY=
GAIA_TEMPERATURE=0.0
GAIA_TIMEOUT_SEC=120
GAIA_MAX_RETRIES=1
GAIA_MAX_OUTPUT_TOKENS=1400

# LLM token/runtime optimization knobs
USE_LLM_VALIDATOR=true
LLM_MAP_MAX_TOKENS=500
LLM_REDUCE_MAX_TOKENS=1400
LLM_VALIDATOR_MAX_TOKENS=800
LLM_PACKET_MAX_CHARS=3200
LLM_APPENDIX_MAX_CHARS=1800
LLM_MAP_MAX_PACKETS=4
LLM_VALIDATION_MAX_ROUNDS=2

# Source stabilization / cache TTLs
CACHE_TTL_EXTERNAL_SIGNALS_SEC=21600
CACHE_TTL_ADDITIONAL_CONTEXT_SEC=21600
CACHE_TTL_STALE_FALLBACK_SEC=2592000
SOURCE_TTL_NEWS_SEC=21600
SOURCE_TTL_WEATHER_SEC=86400
SOURCE_TTL_MARKET_EVENTS_SEC=172800

# Optional Azure-compatible fallback aliases
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_VERSION=
AZURE_OPENAI_DEPLOYMENT=
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_TEMPERATURE=0.0

# -----------------------------
# Google Search Console
# -----------------------------
# Leave empty to use TARGET_DOMAIN as URL-prefix property, e.g. https://allegro.pl/
GSC_SITE_URL=
# Optional per-country GSC property mapping (overrides GSC_SITE_URL in multi-country runs).
# Recommended for domain-properties:
# "PL:sc-domain:allegro.pl,CZ:sc-domain:allegro.cz,SK:sc-domain:allegro.sk,HU:sc-domain:allegro.hu"
GSC_SITE_URL_MAP=
# Filter Search Console data by country (PL -> pol)
GSC_COUNTRY_FILTER=PL

# Option A (recommended): Service Account JSON
GSC_CREDENTIALS_PATH=

# Option B: OAuth client secret JSON + refresh token
GSC_OAUTH_CLIENT_SECRET_PATH=
GSC_OAUTH_REFRESH_TOKEN=
GSC_OAUTH_TOKEN_URI=https://oauth2.googleapis.com/token

GSC_ROW_LIMIT=3000
GSC_DIMENSION_SETS="query;page"

# -----------------------------
# Query filtering (exclude unrelated Allegro intents)
# -----------------------------
FILTER_IRRELEVANT_QUERIES=true
QUERY_EXCLUDE_PATTERNS="allegro ma non troppo,allegro non troppo,allegro con brio,sonata allegro,tempo allegro,hotel allegro,restauracja allegro,kino allegro,allegro muzyka"

# -----------------------------
# Senuto
# -----------------------------
# Optional: pre-issued token
SENUTO_TOKEN=
# Recommended: auto token generation and refresh via credentials
SENUTO_EMAIL=
SENUTO_PASSWORD=
SENUTO_TOKEN_ENDPOINT=/api/users/token

SENUTO_BASE_URL=https://api.senuto.com
# Default: host extracted from TARGET_DOMAIN
SENUTO_DOMAIN=
# Based on Senuto docs collection endpoint list
SENUTO_VISIBILITY_ENDPOINT=/api/visibility_analysis/reports/domain_positions/getPositionsSumsDistributionChartData
SENUTO_FETCH_MODE=topLevelDomain
SENUTO_COUNTRY_ID=1
SENUTO_COUNTRY_ID_MAP="PL:1,CZ:50,SK:164,HU:82"
SENUTO_DATE_INTERVAL=weekly
SENUTO_VISIBILITY_METRIC=top10
SENUTO_COMPETITOR_DOMAINS="temu.com/pl,amazon.pl,ceneo.pl,olx.pl,shein.com,mediaexpert.pl"
SENUTO_TOP_ROWS=10

# -----------------------------
# Google Analytics 4 (optional)
# -----------------------------
GA4_ENABLED=false
GA4_PROPERTY_ID=
GA4_PROPERTY_ID_MAP="PL:,CZ:,SK:,HU:"
GA4_CREDENTIALS_PATH=secret.json
GA4_TOP_ROWS=10

# -----------------------------
# Allegro Trends API (optional)
# -----------------------------
ALLEGRO_TRENDS_ENABLED=false
ALLEGRO_TRENDS_BASIC_AUTH_LOGIN=search-trends-ui
ALLEGRO_TRENDS_BASIC_AUTH_PASSWORD=
ALLEGRO_TRENDS_TECHNICAL_ACCOUNT_LOGIN=
ALLEGRO_TRENDS_TECHNICAL_ACCOUNT_PASSWORD=
ALLEGRO_TRENDS_OAUTH_URL=https://oauth.allegrogroup.com/auth/oauth/token
ALLEGRO_TRENDS_API_BASE_URL=https://search-trends-service-prod-passive.allegrogroup.com
ALLEGRO_TRENDS_INTERVAL=day
ALLEGRO_TRENDS_EXACT=false
ALLEGRO_TRENDS_ESCAPE_QUERY=true
ALLEGRO_TRENDS_MEASURES="VISIT,PV,OFFERS,GMV,DEALS"
ALLEGRO_TRENDS_TOP_ROWS=10

# -----------------------------
# External signals
# -----------------------------
WEATHER_LATITUDE=52.2297
WEATHER_LONGITUDE=21.0122
WEATHER_LABEL=PL-central
WEATHER_LATITUDE_MAP="PL:52.2297,CZ:50.0755,SK:48.1486,HU:47.4979"
WEATHER_LONGITUDE_MAP="PL:21.0122,CZ:14.4378,SK:17.1077,HU:19.0402"
WEATHER_LABEL_MAP="PL:PL-Warsaw,CZ:CZ-Prague,SK:SK-Bratislava,HU:HU-Budapest"
GOOGLE_STATUS_ENDPOINT=https://status.search.google.com/incidents.json
GOOGLE_BLOG_RSS=https://feeds.feedburner.com/blogspot/amDG
HOLIDAYS_COUNTRY_CODE=PL
HOLIDAYS_COUNTRY_CODE_MAP="PL:PL,CZ:CZ,SK:SK,HU:HU"
HOLIDAYS_API_BASE_URL=https://openholidaysapi.org
HOLIDAYS_LANGUAGE_CODE=PL
HOLIDAYS_LANGUAGE_CODE_MAP="PL:PL,CZ:CS,SK:SK,HU:HU"
PAGESPEED_API_KEY=
GOOGLE_TRENDS_RSS_URL=https://trends.google.com/trending/rss?geo=PL
GOOGLE_TRENDS_RSS_URL_MAP="PL:https://trends.google.com/trending/rss?geo=PL,CZ:https://trends.google.com/trending/rss?geo=CZ,SK:https://trends.google.com/trending/rss?geo=SK,HU:https://trends.google.com/trending/rss?geo=HU"
MARKET_EVENTS_ENABLED=true
MARKET_EVENTS_API_BASE_URL=https://api.gdeltproject.org/api/v2/doc/doc
MARKET_EVENTS_TOP_ROWS=12
FREE_PUBLIC_SOURCES_ENABLED=true
FREE_PUBLIC_SOURCES_TOP_ROWS=3
NAGER_HOLIDAYS_COUNTRY_CODE=PL
# Optional (only for EIA source in free hub)
EIA_API_KEY=
PLATFORM_PULSE_ENABLED=true
PLATFORM_PULSE_RSS_URLS="https://ec.europa.eu/commission/presscorner/api/rss,https://eur-lex.europa.eu/content/help/search/predefined-rss.html?locale=en,https://www.gov.pl/rss"
PLATFORM_PULSE_TOP_ROWS=12
NBP_API_BASE_URL=https://api.nbp.pl/api
IMGW_WARNINGS_URL=https://danepubliczne.imgw.pl/api/data/warningsmeteo

# News scraping (PL + global)
NEWS_SCRAPING_ENABLED=true
NEWS_RSS_URLS_PL="https://news.google.com/rss/search?q=allegro+OR+e-commerce+OR+handel+OR+logistyka&hl=pl&gl=PL&ceid=PL:pl,https://www.bankier.pl/rss/wiadomosci.xml"
NEWS_RSS_URLS_GLOBAL="https://news.google.com/rss/search?q=ecommerce+OR+retail+OR+google+search+update+OR+logistics&hl=en-US&gl=US&ceid=US:en,https://feeds.reuters.com/reuters/businessNews"
NEWS_HTML_URLS_PL="https://www.money.pl/,https://www.bankier.pl/"
NEWS_HTML_URLS_GLOBAL="https://www.reuters.com/world/,https://www.ft.com/world"
NEWS_KEYWORDS="allegro,e-commerce,ecommerce,retail,marketplace,sprzedaz,handel,logistyka,kurier,clo,vat,inflacja,stopy procentowe,google,core update,search update,awaria,outage,igrzyska,olimpiada,olympics,walentynki,wielkanoc,black week,black friday,cyber monday,smart week,allegro days,megaraty,temu,amazon,aliexpress,shein"
NEWS_MAX_SIGNALS=20

# Weekly SEO + GEO news digest
WEEKLY_NEWS_SUMMARY_ENABLED=true
WEEKLY_NEWS_MAX_ITEMS=12
WEEKLY_NEWS_DOMAINS_SEO="searchengineland.com,searchenginejournal.com,seroundtable.com,developers.google.com,blog.google,blog.google.com"
WEEKLY_NEWS_DOMAINS_GEO="openai.com,ai.googleblog.com,blog.google,anthropic.com,deepmind.google,perplexity.ai,ai.meta.com"
WEEKLY_NEWS_RSS_URLS_SEO="https://news.google.com/rss/search?q=google+search+update+OR+seo+OR+algorithm+update&hl=en-US&gl=US&ceid=US:en,https://www.searchenginejournal.com/feed/,https://searchengineland.com/feed,https://www.seroundtable.com/index.xml,https://developers.google.com/search/blog/rss.xml"
WEEKLY_NEWS_RSS_URLS_GEO="https://news.google.com/rss/search?q=generative+search+OR+ai+search+OR+answer+engine+OR+SGE&hl=en-US&gl=US&ceid=US:en,https://openai.com/blog/rss.xml,https://ai.googleblog.com/feeds/posts/default?alt=rss,https://deepmind.google/discover/rss.xml,https://www.anthropic.com/news/rss.xml,https://www.perplexity.ai/hub/rss"
WEEKLY_NEWS_KEYWORDS_SEO="seo,search,google,algorithm,core update,ranking,indexing,search console,discover"
WEEKLY_NEWS_KEYWORDS_GEO="generative,ai search,answer engine,sge,search generative experience,overview,llm,chat"

# Gmail (service account with domain-wide delegation)
GMAIL_ENABLED=false
GMAIL_AUTH_MODE=service_account
GMAIL_SERVICE_ACCOUNT_PATH=secret.json
GMAIL_DELEGATE_USER=
GMAIL_SENDER=
GMAIL_RECIPIENT=
GMAIL_OAUTH_CLIENT_SECRET_PATH=
GMAIL_OAUTH_REFRESH_TOKEN=
GMAIL_OAUTH_TOKEN_URI=https://oauth2.googleapis.com/token

# -----------------------------
# Alert thresholds
# -----------------------------
MIN_CLICK_LOSS_ABSOLUTE=100
MIN_CLICK_LOSS_PCT=0.15
